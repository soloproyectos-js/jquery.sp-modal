/*! jQuery.spModal v0.3.0 | Copyright (c) 2015 Gonzalo Chumillas | https://github.com/soloproyectos-js/jquery.sp-modal/blob/master/LICENSE */
!function(t){t.spModalEventable=function(t){this._target=t},t.spModalEventable.prototype._target=null,t.spModalEventable.prototype.getTarget=function(){return this._target},t.spModalEventable.prototype.on=function(){var t=Array.prototype.slice.call(arguments);return this._target.on.apply(this._target,t)},t.spModalEventable.prototype.off=function(){var t=Array.prototype.slice.call(arguments);return this._target.off.apply(this._target,t)},t.spModalEventable.prototype.trigger=function(t){var o=Array.prototype.slice.call(arguments);this._target.trigger.apply(this._target,o)}}(jQuery),function(t){t.spModalWindow=function(o,e){var a=this;void 0===e&&(e={});var s=new t.spModalLoading;s.addButton("Cancel",function(){null!==a._target&&a._target.remove(),s.close()}),this._target=t('<iframe class="sp-modal-window" />').css("visibility","hidden").attr("src",o).data(e).load(function(){a._target.css("visibility","visible"),s.close()}).appendTo("body"),t.spModalEventable.call(this,this._target)},t.spModalWindow.prototype=Object.create(t.spModalEventable.prototype),t.spModalWindow.prototype.close=function(){this._target.remove()}}(jQuery),function(t){t.spModalUi=function(o,e){this._target="string"==t.type(o)?t(o):o,this._modalWindow=void 0===e?this._searchModalWindow():e,void 0===t.ui&&t.error("jQuery.ui >= 1.11.4 is required"),this._target.draggable({handle:".sp-modal-draggable"}),this.update(),t.spModalEventable.call(this,this._target)},t.spModalUi.prototype=Object.create(t.spModalEventable.prototype),t.spModalUi.prototype._modalWindow=null,t.spModalUi.prototype._target=null,t.spModalUi.prototype._x=null,t.spModalUi.prototype._y=null,t.spModalUi.prototype.getModalWindow=function(){return this._modalWindow},t.spModalUi.prototype.getTarget=function(){return this._target},t.spModalUi.prototype.getParam=function(t){return this._modalWindow.data(t)},t.spModalUi.prototype.getX=function(){return this._x},t.spModalUi.prototype.setX=function(t){this._x=t,this.update()},t.spModalUi.prototype.getY=function(){return this._y},t.spModalUi.prototype.setY=function(t){this._y=t,this.update()},t.spModalUi.prototype.off=function(){var o=Array.prototype.slice.call(arguments);return 0==t(document).has(this._modalWindow).length&&this._modalWindow.off.apply(this._modalWindow,o),this._target.off.apply(this._target,o)},t.spModalUi.prototype.trigger=function(o){var e=this,a=Array.prototype.slice.call(arguments);0==t(document).has(this._modalWindow).length&&this._target.one(o,function(){e._modalWindow.trigger.apply(e._modalWindow,a)}),this._target.trigger.apply(this._target,a)},t.spModalUi.prototype.close=function(){this._modalWindow.remove()},t.spModalUi.prototype.update=function(){var o=null===this.getX()?Math.max(0,t(window).width()/2-this._target.width()/2):this.getX(),e=null===this.getY()?Math.max(0,t(window).height()/5-this._target.height()/2):this.getY();this._target.css({left:o,top:e})},t.spModalUi.prototype._searchModalWindow=function(){var o=t(window);return window.parent.$("iframe").each(function(){return this.contentWindow===window?(o=window.parent.$(this),!1):void 0}),o}}(jQuery),function(t){t.spModalDialog=function(o,e){t.spModalUi.call(this,o,e)},t.spModalDialog.prototype=Object.create(t.spModalUi.prototype),t.spModalDialog.prototype.getButtons=function(){var o=this.getTarget(),e=t(".sp-modal-footer input[type=button]",o);return t.map(e,function(o){return t(o)})},t.spModalDialog.prototype.addButton=function(o,e){var a=this.getTarget(),s=t(".sp-modal-footer",a),i=t('<input type="button" />').val(o).appendTo(s).focus();return void 0!==e&&i.on("click",t.proxy(e,this)),i}}(jQuery),function(t){t.spModalLoading=function(o){void 0===o&&(o="Please wait...");var e=t('<div class="sp-modal-ui sp-modal-loading"><div class="sp-modal-icon"></div><div class="sp-modal-text"></div><div class="sp-modal-footer"></div></div>');t(".sp-modal-text",e).text(o);var a=t('<div class="sp-modal-window" />');a.appendTo("body"),a.append(e),t.spModalDialog.call(this,e,a)},t.spModalLoading.prototype=Object.create(t.spModalDialog.prototype)}(jQuery),function(t){t.spModalProgress=function(o,e){void 0===e&&(e="Please wait...");var a=t('<div class="sp-modal-ui sp-modal-message sp-modal-progress"><div class="sp-modal-header sp-modal-draggable"></div><div class="sp-modal-body"><div class="sp-modal-text"></div><div class="sp-modal-progress-bar"><div class="sp-modal-indicator">&nbsp;</div><div class="sp-modal-percent">0%</div></div></div><div class="sp-modal-footer"></div></div>');t(".sp-modal-header",a).text(o),t(".sp-modal-text",a).text(e);var s=t('<div class="sp-modal-window" />');s.appendTo("body"),s.append(a),t.spModalDialog.call(this,a,s)},t.spModalProgress.prototype=Object.create(t.spModalDialog.prototype),t.spModalProgress.prototype._value=0,t.spModalProgress.prototype.getValue=function(){return this._value},t.spModalProgress.prototype.setValue=function(t){this._value=Math.max(0,Math.min(t,1)),this.update()},t.spModalProgress.prototype.update=function(){var o=this.getTarget(),e=100*this._value;t(".sp-modal-indicator",o).css("width",e+"%"),t(".sp-modal-percent",o).text(Math.floor(e)+"%"),t.spModalDialog.prototype.update.call(this)}}(jQuery),function(t){t.spModalMessage=function(o,e){var a=t('<div class="sp-modal-ui sp-modal-message"><div class="sp-modal-header sp-modal-draggable"></div><div class="sp-modal-body"><div class="sp-modal-text"></div></div><div class="sp-modal-footer"></div></div>');t(".sp-modal-header",a).text(o),t(".sp-modal-text",a).text(e);var s=t('<div class="sp-modal-window" />');s.appendTo("body"),s.append(a),t.spModalDialog.call(this,a,s)},t.spModalMessage.prototype=Object.create(t.spModalDialog.prototype),t.spModalMessage.prototype._availTextAlign=["left","right","center","justify","initial","inherit"],t.spModalMessage.prototype._textAlign="center",t.spModalMessage.prototype.getText=function(){var o=this.getTarget();return t(".sp-modal-text",o).text()},t.spModalMessage.prototype.setText=function(o){var e=this.getTarget();t(".sp-modal-text",e).text(o)},t.spModalMessage.prototype.getHtmlText=function(){var o=this.getTarget();return t(".sp-modal-text",o).html()},t.spModalMessage.prototype.setHtmlText=function(o){var e=this.getTarget();t(".sp-modal-text",e).html(o)},t.spModalMessage.prototype.getTextAlign=function(){return this._textAlign},t.spModalMessage.prototype.setTextAlign=function(o){t.inArray(o,this._availTextAlign)<0&&t.error("Invalid alignment. Valid alignments are: "+this._availTextAlign.join(", ")),this._textAlign=o,this.update()},t.spModalMessage.prototype.update=function(){var o=this.getTarget();t(".sp-modal-text",o).css("text-align",this._textAlign),t.spModalDialog.prototype.update.call(this)}}(jQuery),function(t){var o={window:function(o,e){return new t.spModalWindow(o,e)},ui:function(o,e){return new t.spModalUi(o,e)},message:function(o,e){return new t.spModalMessage(o,e)},alert:function(o,e){arguments.length<2&&(e=o,o="Alert");var a=new t.spModalMessage(o,e);return a.addButton("Ok",function(){a.close()}),a},confirm:function(o,e,a){arguments.length<3&&(a=e,e=o,o="Confirm");var s=new t.spModalMessage(o,e);return s.addButton("Ok",function(){s.close(),t.proxy(a,this)()}),s.addButton("Cancel",function(){s.close()}),s},error:function(o,e,a){("string"!=t.type(o)||"string"!=t.type(e))&&(a=e,e=o,o="Error");var s=new t.spModalMessage(o,e);s.addButton("Ok",function(){s.close()}),void 0!==a&&t.proxy(a,s)(),t.error(e)},loading:function(o){return new t.spModalLoading(o)},upload:function(o,e,a){var s=new t.spModalRequestUpload(o,e,a);return s.send()}};t.spModal=function(e,a){var s=o[e],a=Array.prototype.slice.call(arguments,1);return void 0===s&&t.error("Method not found: "+e),s.apply(this,a)}}(jQuery);